#if LV_BUILD_TEST
#include "../lvgl.h"

#include "unity/unity.h"


const char * read_exp =
    "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam sed maximus orci. Morbi massa nisi, varius eu convallis ac, venenatis at metus. In in nibh id urna pretium feugiat vitae eu libero. Ut eget fringilla eros. Nunc ullamcorper lectus mauris, vel rhoncus velit volutpat et. Phasellus sed molestie massa. Maecenas quis dui sollicitudin, vulputate nunc ut, dictum quam. Nam a congue lorem. Nulla non facilisis sapien. Ut luctus nulla nibh, sed finibus urna porta non. Duis aliquet augue id urna euismod auctor. Integer pellentesque vulputate enim non mattis. Donec finibus mattis dolor, et feugiat nisi pharetra porta. Mauris ullamcorper cursus magna. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.";


static void read_range(lv_fs_file_t * f, uint32_t from, uint32_t to);

static void read_random_drv(char drv_letter);

void setUp(void)
{
    /* Function run before every test */
}

void tearDown(void)
{
    /* Function run after every test */
}
#include <stdio.h>
#include <errno.h>
#include <unistd.h>

void test_read(void)
{
    lv_fs_res_t res;

    char cur[512];
    getcwd(cur, 512);
    errno = 0;
    void * a = fopen("src/test_files/readtest.txt", "rd");
    printf("%s, %d, %p\n", cur, errno, a);
    fclose(a);

    /*'A' has cache*/
    lv_fs_file_t fa;
    res = lv_fs_open(&fa, "A:src/test_files/readtest.txt", LV_FS_MODE_RD);
    TEST_ASSERT_EQUAL(LV_FS_RES_OK, res);

    /*'B' has no cache*/
    lv_fs_file_t fb;
    res = lv_fs_open(&fb, "B:src/test_files/readtest.txt", LV_FS_MODE_RD);
    TEST_ASSERT_EQUAL(LV_FS_RES_OK, res);

    /*Use an odd size to make sure it's not aligned with the drivier's'cache size*/
    uint8_t buf[79];
    uint32_t cnt = 0;
    uint32_t br = 1;
    while(br) {
        res = lv_fs_read(&fa, buf, sizeof(buf), &br);
        TEST_ASSERT_EQUAL(LV_FS_RES_OK, res);
        TEST_ASSERT_TRUE(memcmp(buf, read_exp + cnt, br) == 0);

        res = lv_fs_read(&fb, buf, sizeof(buf), &br);
        TEST_ASSERT_EQUAL(LV_FS_RES_OK, res);
        TEST_ASSERT_TRUE(memcmp(buf, read_exp + cnt, br) == 0);
        cnt += br;
    }

    lv_fs_close(&fa);
    lv_fs_close(&fb);
}

void test_read_random(void)
{
    read_random_drv('A');
    read_random_drv('B');
}

/**
 * Read bytes from the `from` index to the `to index`
 * Assume that file `f` has 256 byte of content 0..255
 */
static void read_range(lv_fs_file_t * f, uint32_t from, uint32_t to)
{
    lv_fs_seek(f, from, LV_FS_SEEK_SET);

    uint32_t len = to - from + 1;
    uint8_t buf_rd[256];
    uint32_t br;
    lv_fs_read(f, buf_rd, len, &br);

    TEST_ASSERT_EQUAL(br, len);

    uint32_t i;
    for(i = 0; i < len; i++) {
        TEST_ASSERT_EQUAL(buf_rd[i], from + i);
    }
}

static void read_random_drv(char drv_letter)
{
    /*Hack to force a small cache size*/
    lv_fs_drv_t * drv = lv_fs_get_drv(drv_letter);
    drv->cache_size = 32;

    char fn[64];
    lv_snprintf(fn, sizeof(fn), "%c:fs_read_random.bin", drv_letter);

    lv_fs_res_t res;
    lv_fs_file_t f;
    res = lv_fs_open(&f, fn, LV_FS_MODE_WR);
    TEST_ASSERT_EQUAL(LV_FS_RES_OK, res);

    uint8_t buf256[256];
    uint32_t i;
    for(i = 0; i < 256; i++) buf256[i] = i;

    res = lv_fs_write(&f, buf256, 256, NULL);
    TEST_ASSERT_EQUAL(LV_FS_RES_OK, res);

    res = lv_fs_close(&f);
    TEST_ASSERT_EQUAL(LV_FS_RES_OK, res);

    res = lv_fs_open(&f, fn, LV_FS_MODE_RD);
    TEST_ASSERT_EQUAL(LV_FS_RES_OK, res);

    read_range(&f, 74, 109);
    read_range(&f, 16, 84);
    read_range(&f, 105, 172);
    read_range(&f, 70, 135);
    read_range(&f, 70, 143);
    read_range(&f, 20, 85);
    read_range(&f, 123, 230);
    read_range(&f, 1, 6);
    read_range(&f, 105, 204);
    read_range(&f, 106, 113);
    read_range(&f, 73, 154);
    read_range(&f, 31, 131);
    read_range(&f, 122, 125);
    read_range(&f, 18, 74);
    read_range(&f, 123, 238);
    read_range(&f, 2, 111);
    read_range(&f, 72, 110);
    read_range(&f, 122, 138);
    read_range(&f, 118, 166);
    read_range(&f, 110, 207);
    read_range(&f, 106, 180);
    read_range(&f, 80, 164);
    read_range(&f, 105, 171);
    read_range(&f, 102, 212);
    read_range(&f, 110, 118);
    read_range(&f, 40, 107);
    read_range(&f, 38, 122);
    read_range(&f, 68, 147);
    read_range(&f, 51, 163);
    read_range(&f, 79, 195);
    read_range(&f, 27, 126);
    read_range(&f, 76, 90);
    read_range(&f, 110, 124);
    read_range(&f, 109, 195);
    read_range(&f, 14, 47);
    read_range(&f, 97, 192);
    read_range(&f, 122, 188);
    read_range(&f, 75, 153);
    read_range(&f, 7, 44);
    read_range(&f, 11, 56);
    read_range(&f, 69, 181);
    read_range(&f, 75, 139);
    read_range(&f, 34, 157);
    read_range(&f, 16, 94);
    read_range(&f, 97, 158);
    read_range(&f, 127, 175);
    read_range(&f, 87, 210);
    read_range(&f, 66, 132);
    read_range(&f, 49, 159);
    read_range(&f, 74, 199);
    read_range(&f, 60, 176);
    read_range(&f, 31, 112);
    read_range(&f, 52, 150);
    read_range(&f, 50, 88);
    read_range(&f, 61, 85);
    read_range(&f, 56, 127);
    read_range(&f, 72, 149);
    read_range(&f, 113, 227);
    read_range(&f, 111, 190);
    read_range(&f, 15, 73);
    read_range(&f, 23, 71);
    read_range(&f, 8, 43);
    read_range(&f, 28, 145);
    read_range(&f, 68, 115);
    read_range(&f, 84, 162);
    read_range(&f, 108, 193);
    read_range(&f, 26, 96);
    read_range(&f, 8, 133);
    read_range(&f, 123, 229);
    read_range(&f, 114, 217);
    read_range(&f, 17, 36);
    read_range(&f, 101, 156);
    read_range(&f, 120, 181);
    read_range(&f, 48, 159);
    read_range(&f, 0, 8);
    read_range(&f, 22, 129);
    read_range(&f, 101, 221);
    read_range(&f, 113, 229);
    read_range(&f, 114, 180);
    read_range(&f, 75, 128);
    read_range(&f, 83, 144);
    read_range(&f, 120, 169);
    read_range(&f, 128, 204);
    read_range(&f, 88, 108);
    read_range(&f, 19, 55);
    read_range(&f, 33, 33);
    read_range(&f, 86, 98);
    read_range(&f, 3, 26);
    read_range(&f, 72, 145);
    read_range(&f, 87, 147);
    read_range(&f, 0, 62);
    read_range(&f, 16, 52);
    read_range(&f, 42, 167);
    read_range(&f, 71, 176);
    read_range(&f, 119, 188);
    read_range(&f, 27, 78);
    read_range(&f, 86, 94);
    read_range(&f, 23, 41);
    read_range(&f, 52, 107);
    read_range(&f, 3, 100);
    read_range(&f, 121, 153);
    read_range(&f, 64, 110);
    read_range(&f, 92, 94);
    read_range(&f, 107, 203);
    read_range(&f, 72, 175);
    read_range(&f, 72, 75);
    read_range(&f, 90, 108);
    read_range(&f, 62, 84);
    read_range(&f, 29, 72);
    read_range(&f, 27, 137);
    read_range(&f, 111, 137);
    read_range(&f, 116, 176);
    read_range(&f, 57, 106);
    read_range(&f, 48, 169);
    read_range(&f, 6, 60);
    read_range(&f, 127, 250);
    read_range(&f, 37, 50);
    read_range(&f, 48, 100);
    read_range(&f, 3, 79);
    read_range(&f, 11, 28);
    read_range(&f, 70, 132);
    read_range(&f, 37, 137);
    read_range(&f, 69, 139);
    read_range(&f, 75, 160);
    read_range(&f, 60, 156);
    read_range(&f, 29, 140);
    read_range(&f, 103, 224);
    read_range(&f, 82, 88);
    read_range(&f, 76, 110);
    read_range(&f, 115, 200);
    read_range(&f, 37, 54);
    read_range(&f, 26, 118);
    read_range(&f, 56, 90);
    read_range(&f, 73, 94);
    read_range(&f, 3, 119);
    read_range(&f, 76, 186);
    read_range(&f, 64, 97);
    read_range(&f, 62, 129);
    read_range(&f, 97, 136);
    read_range(&f, 75, 93);
    read_range(&f, 83, 176);
    read_range(&f, 81, 198);
    read_range(&f, 5, 58);
    read_range(&f, 26, 82);
    read_range(&f, 16, 89);
    read_range(&f, 123, 127);
    read_range(&f, 67, 158);
    read_range(&f, 59, 114);
    read_range(&f, 70, 74);
    read_range(&f, 105, 162);
    read_range(&f, 94, 130);
    read_range(&f, 18, 73);
    read_range(&f, 68, 154);
    read_range(&f, 110, 130);
    read_range(&f, 93, 202);
    read_range(&f, 29, 71);
    read_range(&f, 10, 110);
    read_range(&f, 29, 48);
    read_range(&f, 90, 94);
    read_range(&f, 31, 118);
    read_range(&f, 102, 179);
    read_range(&f, 90, 114);
    read_range(&f, 76, 194);
    read_range(&f, 41, 142);
    read_range(&f, 40, 156);
    read_range(&f, 36, 97);
    read_range(&f, 119, 149);
    read_range(&f, 81, 127);
    read_range(&f, 37, 76);
    read_range(&f, 74, 191);
    read_range(&f, 46, 67);
    read_range(&f, 35, 37);
    read_range(&f, 51, 160);
    read_range(&f, 85, 173);
    read_range(&f, 110, 206);
    read_range(&f, 108, 222);
    read_range(&f, 98, 202);
    read_range(&f, 118, 118);
    read_range(&f, 123, 233);
    read_range(&f, 77, 196);
    read_range(&f, 48, 102);
    read_range(&f, 20, 133);
    read_range(&f, 110, 163);
    read_range(&f, 93, 191);
    read_range(&f, 56, 101);
    read_range(&f, 109, 235);
    read_range(&f, 33, 83);
    read_range(&f, 8, 113);
    read_range(&f, 99, 125);
    read_range(&f, 2, 21);
    read_range(&f, 50, 154);
    read_range(&f, 104, 154);
    read_range(&f, 68, 174);
    read_range(&f, 36, 118);
    read_range(&f, 99, 191);
    read_range(&f, 72, 118);
    read_range(&f, 86, 171);
    read_range(&f, 72, 112);
    read_range(&f, 102, 146);
    read_range(&f, 48, 120);
    read_range(&f, 14, 74);
    read_range(&f, 41, 69);
    read_range(&f, 99, 198);
    read_range(&f, 0, 65);
    read_range(&f, 1, 89);
    read_range(&f, 97, 184);
    read_range(&f, 121, 190);
    read_range(&f, 128, 202);
    read_range(&f, 104, 140);
    read_range(&f, 10, 53);
    read_range(&f, 122, 159);
    read_range(&f, 122, 178);
    read_range(&f, 112, 121);
    read_range(&f, 14, 58);
    read_range(&f, 34, 76);
    read_range(&f, 66, 135);
    read_range(&f, 27, 93);
    read_range(&f, 73, 85);
    read_range(&f, 13, 36);
    read_range(&f, 124, 177);
    read_range(&f, 78, 105);
    read_range(&f, 10, 55);
    read_range(&f, 39, 73);
    read_range(&f, 90, 137);
    read_range(&f, 59, 129);
    read_range(&f, 119, 124);
    read_range(&f, 103, 195);
    read_range(&f, 41, 149);
    read_range(&f, 11, 124);
    read_range(&f, 46, 89);
    read_range(&f, 125, 175);
    read_range(&f, 20, 94);
    read_range(&f, 99, 136);
    read_range(&f, 91, 157);
    read_range(&f, 74, 137);
    read_range(&f, 4, 9);
    read_range(&f, 82, 98);
    read_range(&f, 29, 150);
    read_range(&f, 106, 205);
    read_range(&f, 21, 62);
    read_range(&f, 26, 122);
    read_range(&f, 80, 152);
    read_range(&f, 20, 115);
    read_range(&f, 56, 169);
    read_range(&f, 8, 63);
    read_range(&f, 115, 121);
    read_range(&f, 27, 110);
    read_range(&f, 128, 250);
    read_range(&f, 58, 70);
    read_range(&f, 0, 32);
    read_range(&f, 30, 154);
    read_range(&f, 83, 210);
    read_range(&f, 115, 192);
    read_range(&f, 85, 176);
    read_range(&f, 21, 116);
    read_range(&f, 69, 79);
    read_range(&f, 58, 101);
    read_range(&f, 19, 136);
    read_range(&f, 32, 93);
    read_range(&f, 37, 98);
    read_range(&f, 25, 51);
    read_range(&f, 31, 145);
    read_range(&f, 49, 160);
    read_range(&f, 95, 195);
    read_range(&f, 120, 138);
    read_range(&f, 4, 12);
    read_range(&f, 3, 65);
    read_range(&f, 6, 84);
    read_range(&f, 17, 43);
    read_range(&f, 10, 105);
    read_range(&f, 85, 193);
    read_range(&f, 41, 140);
    read_range(&f, 118, 209);
    read_range(&f, 127, 231);
    read_range(&f, 96, 140);
    read_range(&f, 16, 53);
    read_range(&f, 97, 212);
    read_range(&f, 65, 111);
    read_range(&f, 86, 200);
    read_range(&f, 55, 158);
    read_range(&f, 30, 46);
    read_range(&f, 48, 104);
    read_range(&f, 1, 117);
    read_range(&f, 80, 135);
    read_range(&f, 73, 90);
    read_range(&f, 90, 167);
    read_range(&f, 13, 74);
    read_range(&f, 114, 130);
    read_range(&f, 69, 196);
    read_range(&f, 111, 160);
    read_range(&f, 7, 70);
    read_range(&f, 51, 102);
    read_range(&f, 15, 112);
    read_range(&f, 2, 81);
    read_range(&f, 43, 114);
    read_range(&f, 9, 79);
    read_range(&f, 110, 146);
    read_range(&f, 71, 89);
    read_range(&f, 93, 139);
    read_range(&f, 76, 99);
    read_range(&f, 54, 171);
    read_range(&f, 110, 224);
    read_range(&f, 9, 127);
    read_range(&f, 56, 70);
    read_range(&f, 17, 64);
    read_range(&f, 83, 196);
    read_range(&f, 41, 130);
    read_range(&f, 64, 73);
    read_range(&f, 21, 83);
    read_range(&f, 92, 203);
    read_range(&f, 22, 42);
    read_range(&f, 102, 141);
    read_range(&f, 59, 108);
    read_range(&f, 104, 165);
    read_range(&f, 121, 223);
    read_range(&f, 18, 29);
    read_range(&f, 95, 107);
    read_range(&f, 90, 126);
    read_range(&f, 24, 53);
    read_range(&f, 4, 83);
    read_range(&f, 19, 53);
    read_range(&f, 47, 156);
    read_range(&f, 69, 126);
    read_range(&f, 28, 75);
    read_range(&f, 82, 143);
    read_range(&f, 3, 67);
    read_range(&f, 69, 112);
    read_range(&f, 2, 15);
    read_range(&f, 55, 159);
    read_range(&f, 92, 103);
    read_range(&f, 70, 187);
    read_range(&f, 36, 127);
    read_range(&f, 100, 123);
    read_range(&f, 30, 106);
    read_range(&f, 87, 168);
    read_range(&f, 111, 124);
    read_range(&f, 50, 132);
    read_range(&f, 93, 122);
    read_range(&f, 41, 129);
    read_range(&f, 83, 178);
    read_range(&f, 19, 130);
    read_range(&f, 80, 171);
    read_range(&f, 20, 126);
    read_range(&f, 23, 39);
    read_range(&f, 12, 37);
    read_range(&f, 107, 117);
    read_range(&f, 26, 110);
    read_range(&f, 23, 135);
    read_range(&f, 30, 34);
    read_range(&f, 49, 88);
    read_range(&f, 55, 106);
    read_range(&f, 25, 118);
    read_range(&f, 78, 190);
    read_range(&f, 95, 114);
    read_range(&f, 34, 118);
    read_range(&f, 121, 154);
    read_range(&f, 57, 106);
    read_range(&f, 111, 182);
    read_range(&f, 124, 158);
    read_range(&f, 118, 135);
    read_range(&f, 30, 113);
    read_range(&f, 54, 153);
    read_range(&f, 49, 135);
    read_range(&f, 59, 133);
    read_range(&f, 66, 92);
    read_range(&f, 123, 207);
    read_range(&f, 6, 76);
    read_range(&f, 113, 237);
    read_range(&f, 97, 173);
    read_range(&f, 114, 199);
    read_range(&f, 97, 151);
    read_range(&f, 26, 26);
    read_range(&f, 52, 97);
    read_range(&f, 87, 180);
    read_range(&f, 111, 231);
    read_range(&f, 42, 62);
    read_range(&f, 97, 156);
    read_range(&f, 51, 136);
    read_range(&f, 52, 63);
    read_range(&f, 48, 143);
    read_range(&f, 125, 249);
    read_range(&f, 71, 168);
    read_range(&f, 105, 119);
    read_range(&f, 4, 93);
    read_range(&f, 124, 148);
    read_range(&f, 100, 190);
    read_range(&f, 114, 186);
    read_range(&f, 69, 97);
    read_range(&f, 7, 97);
    read_range(&f, 50, 161);
    read_range(&f, 69, 95);
    read_range(&f, 90, 196);
    read_range(&f, 95, 143);
    read_range(&f, 121, 186);
    read_range(&f, 104, 201);
    read_range(&f, 30, 92);
    read_range(&f, 124, 205);
    read_range(&f, 58, 140);
    read_range(&f, 42, 87);
    read_range(&f, 58, 115);
    read_range(&f, 90, 103);
    read_range(&f, 34, 146);
    read_range(&f, 66, 139);
    read_range(&f, 103, 181);
    read_range(&f, 63, 188);
    read_range(&f, 11, 53);
    read_range(&f, 61, 105);
    read_range(&f, 76, 179);
    read_range(&f, 34, 36);
    read_range(&f, 47, 158);
    read_range(&f, 34, 121);
    read_range(&f, 88, 189);
    read_range(&f, 24, 87);
    read_range(&f, 36, 76);
    read_range(&f, 125, 251);
    read_range(&f, 66, 192);
    read_range(&f, 8, 127);
    read_range(&f, 34, 59);
    read_range(&f, 62, 167);
    read_range(&f, 19, 62);
    read_range(&f, 115, 213);
    read_range(&f, 75, 137);
    read_range(&f, 106, 135);
    read_range(&f, 75, 158);
    read_range(&f, 26, 134);
    read_range(&f, 110, 125);
    read_range(&f, 111, 172);
    read_range(&f, 42, 149);
    read_range(&f, 38, 108);
    read_range(&f, 115, 224);
    read_range(&f, 20, 134);
    read_range(&f, 111, 120);
    read_range(&f, 111, 184);
    read_range(&f, 37, 111);
    read_range(&f, 112, 233);
    read_range(&f, 126, 142);
    read_range(&f, 75, 158);
    read_range(&f, 41, 145);
    read_range(&f, 34, 121);
    read_range(&f, 18, 122);
    read_range(&f, 120, 209);
    read_range(&f, 28, 100);
    read_range(&f, 51, 134);
    read_range(&f, 45, 98);
    read_range(&f, 114, 157);
    read_range(&f, 93, 143);
    read_range(&f, 31, 38);
    read_range(&f, 11, 21);
    read_range(&f, 89, 95);
    read_range(&f, 70, 120);
    read_range(&f, 68, 189);
    read_range(&f, 41, 53);
    read_range(&f, 111, 140);
    read_range(&f, 95, 120);
    read_range(&f, 73, 191);
    read_range(&f, 61, 81);
    read_range(&f, 32, 124);
    read_range(&f, 58, 112);
    read_range(&f, 25, 109);
    read_range(&f, 122, 245);
    read_range(&f, 96, 154);
    read_range(&f, 51, 167);
    read_range(&f, 58, 85);
    read_range(&f, 94, 175);
    read_range(&f, 86, 110);
    read_range(&f, 21, 143);
    read_range(&f, 12, 87);
    read_range(&f, 10, 12);
    read_range(&f, 58, 144);
    read_range(&f, 125, 148);
    read_range(&f, 110, 145);
    read_range(&f, 87, 163);
    read_range(&f, 99, 188);
    read_range(&f, 32, 41);
    read_range(&f, 59, 135);
    read_range(&f, 61, 161);
    read_range(&f, 96, 152);
    read_range(&f, 25, 131);
    read_range(&f, 70, 128);
    read_range(&f, 39, 132);
    read_range(&f, 31, 157);
    read_range(&f, 79, 95);
    read_range(&f, 81, 97);
    read_range(&f, 44, 114);
    read_range(&f, 4, 96);
    read_range(&f, 128, 222);
    read_range(&f, 27, 131);
    read_range(&f, 71, 83);
    read_range(&f, 61, 94);
    read_range(&f, 57, 178);
    read_range(&f, 91, 170);
    read_range(&f, 45, 134);
    read_range(&f, 31, 76);
    read_range(&f, 50, 66);
    read_range(&f, 102, 156);
    read_range(&f, 7, 50);
    read_range(&f, 114, 131);
    read_range(&f, 78, 179);
    read_range(&f, 77, 133);
    read_range(&f, 45, 161);
    read_range(&f, 72, 140);
    read_range(&f, 87, 119);
    read_range(&f, 44, 50);
    read_range(&f, 43, 56);
    read_range(&f, 78, 147);
    read_range(&f, 58, 174);
    read_range(&f, 70, 155);
    read_range(&f, 91, 138);
    read_range(&f, 89, 114);
    read_range(&f, 102, 199);
    read_range(&f, 113, 181);
    read_range(&f, 103, 223);
    read_range(&f, 119, 182);
    read_range(&f, 81, 152);
    read_range(&f, 30, 37);
    read_range(&f, 98, 199);
    read_range(&f, 34, 119);
    read_range(&f, 96, 206);
    read_range(&f, 74, 150);
    read_range(&f, 86, 207);
    read_range(&f, 127, 142);
    read_range(&f, 77, 177);
    read_range(&f, 49, 161);
    read_range(&f, 106, 140);
    read_range(&f, 33, 139);
    read_range(&f, 25, 48);
    read_range(&f, 61, 162);
    read_range(&f, 51, 87);
    read_range(&f, 122, 187);
    read_range(&f, 91, 202);
    read_range(&f, 97, 162);
    read_range(&f, 14, 102);
    read_range(&f, 80, 114);
    read_range(&f, 117, 202);
    read_range(&f, 123, 151);
    read_range(&f, 82, 116);
    read_range(&f, 31, 87);
    read_range(&f, 120, 175);
    read_range(&f, 21, 143);
    read_range(&f, 127, 211);
    read_range(&f, 112, 202);
    read_range(&f, 8, 54);
    read_range(&f, 80, 86);
    read_range(&f, 90, 216);
    read_range(&f, 111, 198);
    read_range(&f, 124, 213);
    read_range(&f, 31, 52);
    read_range(&f, 95, 147);
    read_range(&f, 51, 130);
    read_range(&f, 72, 96);
    read_range(&f, 85, 203);
    read_range(&f, 36, 65);
    read_range(&f, 75, 161);
    read_range(&f, 44, 115);
    read_range(&f, 61, 123);
    read_range(&f, 90, 211);
    read_range(&f, 39, 47);
    read_range(&f, 72, 134);
    read_range(&f, 75, 139);
    read_range(&f, 86, 87);
    read_range(&f, 124, 185);
    read_range(&f, 57, 87);
    read_range(&f, 1, 44);
    read_range(&f, 30, 49);
    read_range(&f, 105, 158);
    read_range(&f, 116, 172);
    read_range(&f, 58, 94);
    read_range(&f, 31, 138);
    read_range(&f, 65, 123);
    read_range(&f, 58, 96);
    read_range(&f, 80, 86);
    read_range(&f, 25, 138);
    read_range(&f, 6, 82);
    read_range(&f, 71, 155);
    read_range(&f, 102, 222);
    read_range(&f, 77, 173);
    read_range(&f, 126, 138);
    read_range(&f, 75, 162);
    read_range(&f, 77, 149);
    read_range(&f, 44, 98);
    read_range(&f, 92, 120);
    read_range(&f, 111, 193);
    read_range(&f, 112, 226);
    read_range(&f, 27, 64);
    read_range(&f, 100, 114);
    read_range(&f, 122, 165);
    read_range(&f, 83, 208);
    read_range(&f, 12, 138);
    read_range(&f, 54, 177);
    read_range(&f, 46, 109);
    read_range(&f, 28, 95);
    read_range(&f, 18, 40);
    read_range(&f, 113, 177);
    read_range(&f, 39, 132);
    read_range(&f, 110, 130);
    read_range(&f, 52, 165);
    read_range(&f, 39, 96);
    read_range(&f, 115, 135);
    read_range(&f, 101, 170);
    read_range(&f, 83, 161);
    read_range(&f, 75, 121);
    read_range(&f, 11, 44);
    read_range(&f, 88, 206);
    read_range(&f, 5, 66);
    read_range(&f, 88, 122);
    read_range(&f, 39, 112);
    read_range(&f, 99, 206);
    read_range(&f, 78, 79);
    read_range(&f, 109, 130);
    read_range(&f, 7, 91);
    read_range(&f, 3, 117);
    read_range(&f, 96, 135);
    read_range(&f, 54, 97);
    read_range(&f, 45, 130);
    read_range(&f, 7, 63);
    read_range(&f, 65, 174);
    read_range(&f, 116, 142);
    read_range(&f, 42, 44);
    read_range(&f, 80, 207);
    read_range(&f, 89, 178);
    read_range(&f, 28, 110);
    read_range(&f, 100, 177);
    read_range(&f, 53, 127);
    read_range(&f, 110, 159);
    read_range(&f, 102, 151);
    read_range(&f, 99, 197);
    read_range(&f, 89, 163);
    read_range(&f, 3, 104);
    read_range(&f, 125, 200);
    read_range(&f, 103, 227);
    read_range(&f, 115, 190);
    read_range(&f, 122, 141);
    read_range(&f, 128, 255);
    read_range(&f, 14, 100);
    read_range(&f, 23, 120);
    read_range(&f, 13, 119);
    read_range(&f, 31, 101);
    read_range(&f, 94, 157);
    read_range(&f, 10, 137);
    read_range(&f, 88, 214);
    read_range(&f, 2, 48);
    read_range(&f, 113, 134);
    read_range(&f, 10, 114);
    read_range(&f, 85, 164);
    read_range(&f, 3, 62);
    read_range(&f, 87, 207);
    read_range(&f, 87, 180);
    read_range(&f, 13, 79);
    read_range(&f, 99, 177);
    read_range(&f, 6, 30);
    read_range(&f, 62, 78);
    read_range(&f, 119, 136);
    read_range(&f, 23, 129);
    read_range(&f, 53, 82);
    read_range(&f, 55, 64);
    read_range(&f, 8, 93);
    read_range(&f, 101, 193);
    read_range(&f, 110, 231);
    read_range(&f, 9, 128);
    read_range(&f, 93, 119);
    read_range(&f, 23, 26);
    read_range(&f, 121, 189);
    read_range(&f, 2, 39);
    read_range(&f, 27, 53);
    read_range(&f, 111, 211);
    read_range(&f, 49, 100);
    read_range(&f, 92, 200);
    read_range(&f, 30, 89);
    read_range(&f, 34, 85);
    read_range(&f, 38, 126);
    read_range(&f, 6, 114);
    read_range(&f, 122, 145);
    read_range(&f, 48, 148);
    read_range(&f, 64, 129);
    read_range(&f, 3, 115);
    read_range(&f, 77, 124);
    read_range(&f, 82, 201);
    read_range(&f, 85, 210);
    read_range(&f, 56, 119);
    read_range(&f, 128, 209);
    read_range(&f, 87, 101);
    read_range(&f, 36, 56);
    read_range(&f, 97, 139);
    read_range(&f, 85, 149);
    read_range(&f, 6, 14);
    read_range(&f, 39, 43);
    read_range(&f, 69, 91);
    read_range(&f, 11, 87);
    read_range(&f, 91, 128);
    read_range(&f, 81, 103);
    read_range(&f, 86, 156);
    read_range(&f, 15, 80);
    read_range(&f, 2, 99);
    read_range(&f, 15, 36);
    read_range(&f, 124, 166);
    read_range(&f, 108, 136);
    read_range(&f, 107, 192);
    read_range(&f, 104, 227);
    read_range(&f, 7, 50);
    read_range(&f, 30, 94);
    read_range(&f, 39, 96);
    read_range(&f, 126, 173);
    read_range(&f, 121, 183);
    read_range(&f, 84, 119);
    read_range(&f, 121, 233);
    read_range(&f, 48, 58);
    read_range(&f, 121, 135);
    read_range(&f, 95, 211);
    read_range(&f, 97, 180);
    read_range(&f, 3, 59);
    read_range(&f, 38, 124);
    read_range(&f, 113, 164);
    read_range(&f, 34, 96);
    read_range(&f, 9, 29);
    read_range(&f, 29, 72);
    read_range(&f, 100, 128);
    read_range(&f, 104, 224);
    read_range(&f, 60, 187);
    read_range(&f, 39, 133);
    read_range(&f, 27, 105);
    read_range(&f, 28, 142);
    read_range(&f, 97, 150);
    read_range(&f, 68, 151);
    read_range(&f, 116, 171);
    read_range(&f, 1, 105);
    read_range(&f, 83, 123);
    read_range(&f, 54, 171);
    read_range(&f, 70, 142);
    read_range(&f, 118, 150);
    read_range(&f, 32, 85);
    read_range(&f, 124, 138);
    read_range(&f, 98, 165);
    read_range(&f, 13, 29);
    read_range(&f, 40, 149);
    read_range(&f, 59, 111);
    read_range(&f, 112, 191);
    read_range(&f, 67, 118);
    read_range(&f, 84, 211);
    read_range(&f, 108, 141);
    read_range(&f, 118, 153);
    read_range(&f, 21, 120);
    read_range(&f, 26, 29);
    read_range(&f, 85, 133);
    read_range(&f, 119, 162);
    read_range(&f, 12, 121);
    read_range(&f, 50, 151);
    read_range(&f, 64, 126);
    read_range(&f, 13, 92);
    read_range(&f, 19, 39);
    read_range(&f, 69, 189);
    read_range(&f, 66, 68);
    read_range(&f, 122, 172);
    read_range(&f, 4, 88);
    read_range(&f, 127, 220);
    read_range(&f, 128, 164);
    read_range(&f, 116, 206);
    read_range(&f, 50, 75);
    read_range(&f, 38, 88);
    read_range(&f, 113, 137);
    read_range(&f, 60, 132);
    read_range(&f, 16, 24);
    read_range(&f, 61, 63);
    read_range(&f, 20, 25);
    read_range(&f, 12, 24);
    read_range(&f, 110, 112);
    read_range(&f, 49, 105);
    read_range(&f, 29, 114);
    read_range(&f, 13, 66);
    read_range(&f, 87, 181);
    read_range(&f, 39, 104);
    read_range(&f, 89, 132);
    read_range(&f, 106, 194);
    read_range(&f, 81, 132);
    read_range(&f, 20, 102);
    read_range(&f, 119, 237);
    read_range(&f, 59, 103);
    read_range(&f, 24, 107);
    read_range(&f, 96, 181);
    read_range(&f, 87, 195);
    read_range(&f, 79, 87);
    read_range(&f, 17, 93);
    read_range(&f, 2, 98);
    read_range(&f, 89, 137);
    read_range(&f, 120, 178);
    read_range(&f, 81, 206);
    read_range(&f, 100, 131);
    read_range(&f, 39, 131);
    read_range(&f, 101, 189);
    read_range(&f, 38, 127);
    read_range(&f, 100, 148);
    read_range(&f, 62, 62);
    read_range(&f, 18, 54);
    read_range(&f, 29, 120);
    read_range(&f, 69, 96);
    read_range(&f, 112, 155);
    read_range(&f, 46, 74);
    read_range(&f, 88, 111);
    read_range(&f, 84, 186);
    read_range(&f, 47, 105);
    read_range(&f, 96, 187);
    read_range(&f, 84, 89);
    read_range(&f, 0, 43);
    read_range(&f, 114, 121);
    read_range(&f, 57, 77);
    read_range(&f, 66, 177);
    read_range(&f, 78, 114);
    read_range(&f, 80, 138);
    read_range(&f, 0, 97);
    read_range(&f, 13, 18);
    read_range(&f, 17, 65);
    read_range(&f, 8, 13);
    read_range(&f, 61, 168);
    read_range(&f, 34, 96);
    read_range(&f, 119, 242);
    read_range(&f, 99, 189);
    read_range(&f, 4, 99);
    read_range(&f, 114, 230);
    read_range(&f, 104, 148);
    read_range(&f, 60, 109);
    read_range(&f, 106, 215);
    read_range(&f, 113, 190);
    read_range(&f, 74, 80);
    read_range(&f, 16, 77);
    read_range(&f, 17, 77);
    read_range(&f, 87, 97);
    read_range(&f, 98, 180);
    read_range(&f, 116, 152);
    read_range(&f, 49, 138);
    read_range(&f, 68, 192);
    read_range(&f, 110, 223);
    read_range(&f, 115, 157);
    read_range(&f, 34, 52);
    read_range(&f, 76, 125);
    read_range(&f, 62, 140);
    read_range(&f, 17, 39);
    read_range(&f, 71, 142);
    read_range(&f, 54, 72);
    read_range(&f, 80, 152);
    read_range(&f, 38, 47);
    read_range(&f, 82, 94);
    read_range(&f, 116, 196);
    read_range(&f, 122, 172);
    read_range(&f, 14, 54);
    read_range(&f, 3, 123);
    read_range(&f, 52, 118);
    read_range(&f, 126, 221);
    read_range(&f, 117, 143);
    read_range(&f, 88, 140);
    read_range(&f, 61, 163);
    read_range(&f, 14, 35);
    read_range(&f, 30, 35);
    read_range(&f, 61, 81);
    read_range(&f, 116, 218);
    read_range(&f, 19, 130);
    read_range(&f, 114, 169);
    read_range(&f, 54, 131);
    read_range(&f, 81, 101);
    read_range(&f, 61, 154);
    read_range(&f, 115, 238);
    read_range(&f, 70, 144);
    read_range(&f, 89, 201);
    read_range(&f, 64, 157);
    read_range(&f, 82, 209);
    read_range(&f, 121, 196);
    read_range(&f, 117, 158);
    read_range(&f, 59, 82);
    read_range(&f, 89, 131);
    read_range(&f, 18, 82);
    read_range(&f, 56, 96);
    read_range(&f, 11, 27);
    read_range(&f, 113, 180);
    read_range(&f, 35, 136);
    read_range(&f, 113, 213);
    read_range(&f, 36, 93);
    read_range(&f, 95, 159);
    read_range(&f, 54, 83);
    read_range(&f, 2, 80);
    read_range(&f, 74, 176);
    read_range(&f, 8, 11);
    read_range(&f, 33, 50);
    read_range(&f, 19, 144);
    read_range(&f, 34, 114);
    read_range(&f, 107, 166);
    read_range(&f, 54, 180);
    read_range(&f, 8, 73);
    read_range(&f, 68, 77);
    read_range(&f, 98, 179);
    read_range(&f, 5, 41);
    read_range(&f, 52, 74);
    read_range(&f, 3, 78);
    read_range(&f, 19, 123);
    read_range(&f, 109, 184);
    read_range(&f, 17, 95);
    read_range(&f, 97, 106);
    read_range(&f, 76, 175);
    read_range(&f, 73, 188);
    read_range(&f, 15, 43);
    read_range(&f, 111, 113);
    read_range(&f, 9, 70);
    read_range(&f, 52, 171);
    read_range(&f, 10, 116);
    read_range(&f, 8, 121);
    read_range(&f, 112, 126);
    read_range(&f, 119, 141);
    read_range(&f, 116, 225);
    read_range(&f, 49, 87);
    read_range(&f, 87, 89);
    read_range(&f, 83, 183);
    read_range(&f, 24, 112);
    read_range(&f, 79, 206);
    read_range(&f, 22, 28);
    read_range(&f, 103, 193);
    read_range(&f, 106, 142);
    read_range(&f, 92, 136);
    read_range(&f, 17, 29);
    read_range(&f, 19, 61);
    read_range(&f, 81, 153);
    read_range(&f, 54, 163);
    read_range(&f, 61, 137);
    read_range(&f, 0, 59);
    read_range(&f, 76, 84);
    read_range(&f, 20, 77);
    read_range(&f, 37, 124);
    read_range(&f, 23, 111);
    read_range(&f, 39, 118);
    read_range(&f, 54, 74);
    read_range(&f, 127, 203);
    read_range(&f, 76, 188);
    read_range(&f, 11, 82);
    read_range(&f, 30, 69);
    read_range(&f, 56, 124);
    read_range(&f, 25, 140);
    read_range(&f, 14, 40);
    read_range(&f, 127, 223);
    read_range(&f, 51, 95);
    read_range(&f, 75, 104);
    read_range(&f, 18, 111);
    read_range(&f, 8, 99);
    read_range(&f, 76, 78);
    read_range(&f, 80, 158);
    read_range(&f, 1, 127);
    read_range(&f, 100, 122);
    read_range(&f, 101, 110);
    read_range(&f, 97, 139);
    read_range(&f, 28, 35);
    read_range(&f, 120, 142);
    read_range(&f, 3, 7);
    read_range(&f, 99, 140);
    read_range(&f, 83, 190);
    read_range(&f, 95, 132);
    read_range(&f, 94, 188);
    read_range(&f, 53, 69);
    read_range(&f, 9, 54);
    read_range(&f, 65, 161);
    read_range(&f, 102, 198);
    read_range(&f, 87, 199);
    read_range(&f, 48, 51);
    read_range(&f, 7, 84);
    read_range(&f, 46, 99);
    read_range(&f, 106, 111);
    read_range(&f, 40, 142);
    read_range(&f, 123, 163);
    read_range(&f, 65, 176);
    read_range(&f, 31, 136);
    read_range(&f, 119, 124);
    read_range(&f, 4, 10);
    read_range(&f, 125, 248);
    read_range(&f, 52, 93);
    read_range(&f, 30, 80);
    read_range(&f, 25, 60);
    read_range(&f, 18, 129);
    read_range(&f, 29, 72);
    read_range(&f, 55, 179);
    read_range(&f, 99, 102);
    read_range(&f, 100, 213);
    read_range(&f, 53, 76);
    read_range(&f, 86, 122);
    read_range(&f, 71, 194);
    read_range(&f, 14, 61);
    read_range(&f, 26, 136);
    read_range(&f, 98, 103);
    read_range(&f, 65, 97);
    read_range(&f, 64, 103);
    read_range(&f, 10, 121);
    read_range(&f, 113, 235);
    read_range(&f, 125, 216);
    read_range(&f, 120, 196);
    read_range(&f, 81, 125);
    read_range(&f, 37, 57);
    read_range(&f, 123, 153);
    read_range(&f, 80, 191);
    read_range(&f, 113, 201);
    read_range(&f, 27, 98);
    read_range(&f, 68, 98);
    read_range(&f, 109, 151);
    read_range(&f, 80, 197);
    read_range(&f, 72, 169);
    read_range(&f, 27, 45);
    read_range(&f, 116, 143);
    read_range(&f, 93, 185);

    res = lv_fs_close(&f);
    TEST_ASSERT_EQUAL(LV_FS_RES_OK, res);
}

#endif
